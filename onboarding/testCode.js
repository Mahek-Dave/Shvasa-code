(()=>{let e="https://services.truyoga.in",t=async function(e,t){try{let n=t?fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}):fetch(e,{method:"GET"}),i=await Promise.race([n,new Promise(function(e,t){setTimeout(function(){t(Error(`%c Request took too long\u{23F0}! Timeout after 10 seconds`,"color:red;font-weight:bold;"))},1e4)})]),a=await i.json();if(!i.ok)throw Error(`${a.message} (${i.status})`);return a}catch(e){throw e}},n={name:"",email:"",phone:"",age:"",gender:"",weight:{unit:"",value:""},onboardingData:{},medicalCondition:{},marketingData:{}},i=[],a=async function(){(await t(`${e}/api/user/getOnboardingQuestions`)).body.forEach(e=>{i.push(e)}),console.log(i)},r=async function(){console.log((await t(`${e}/api/user/getMedicalConditionOptions`,{post:""})).body)},l=function(e){let{name:t,email:i}=e;n.name=t,n.email=i},s=function(e){let{marketingData:t}=e;n.marketingData=t},o=function(e){let{age:t,gender:i,weight:a}=e;n.age=t,n.gender=i,n.weight=a},d=function(e){n.phone=e,console.log(n)};class c{_data;_nextBtn=document.querySelector(".form_next");_prevBtn=document.querySelector(".back-onboarding-slider-btn");_slides=[...document.querySelectorAll(".w-slide")];render(e){this._data=e;let t=this._generateMarkup();console.log(t),this.clear(),_parentElement.insertAdjacentHTML("afterbegin",t)}renderSuccessMessage(e){window.alert(e)}renderErrorMessage(e){window.alert(e)}goNext(){this._nextBtn.click()}goPrev(){this._prevBtn.click()}findActiveSlide(){return this._slides.find(e=>!e.hasAttribute("aria-hidden"))}findTargetBtn(){return this._parentElement.querySelector(".orange-btn")}activateBtn(e=this._targetBtn){e.classList.remove("pointer-events-none")}inActiveBtn(e=this._targetBtn){e.classList.add("pointer-events-none")}viewEventHandler(e,t,n=this._parentElement){n.addEventListener(e,t.bind(this))}renderSpinner(){}captureMarketingData(){let e=new URLSearchParams(window.location.href),t={};return e.forEach((e,n)=>{n.startsWith("utm")&&(t[n]=e)}),t}clear(){this._parentElement.innerHTML=""}}class h extends c{constructor(){super()}_parentElement=document.querySelector("#name-email-slide");_errorMessage="something went wrong while capturing email block";_nameField=this._parentElement.querySelector("#user-name");_emailField=this._parentElement.querySelector("#user-email");_targetBtn=this.findTargetBtn();_data={};checkFiledsValidation(){this._emailField.addEventListener("input",this._isValidFields.bind(this))}nameEmailClickHandler(e){this.checkFiledsValidation(),this._targetBtn.addEventListener("click",()=>{try{let[t,n]=this._getFieldValues();this._addNameAndEmailData(t,n),this._data.marketingData=this.captureMarketingData(),e(this._data),this.goNext()}catch(e){console.log(e)}})}_getFieldValues(){return[this._nameField.value,this._emailField.value]}_addNameAndEmailData(e,t){this._data.name=e,this._data.email=t}_isValidFields(){let[e,t]=this._getFieldValues();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)&&""!=e&&""!=t?this.activateBtn(this._targetBtn):this.inActiveBtn(this._targetBtn)}}var u=new h;class g extends c{_parentElement=document.querySelector("#age-gender-weight-slide");_errorMessage="something went wrong while capturing age block";_ageField=this._parentElement.querySelector("#age");_weightField=this._parentElement.querySelector("#weight");_weightUnitField=this._parentElement.querySelector("#weight-unit");_genderValue;_targetBtn=this.findTargetBtn();constructor(){super(),this._getGenderValue()}_checker(){console.log(this._parentElement),console.log(this._ageField),console.log(this._weightField),console.log(this._weightUnitField),console.log(this._targetBtn)}ageGenderWeightClickHandler(e){[this._weightField,this._ageField].forEach(e=>{e.addEventListener("input",this._isValidFields.bind(this))}),this._targetBtn.addEventListener("click",()=>{let[t,n,i,a]=this._getFieldValues();e({age:+n,gender:t,weight:{unit:a,value:+i}}),this.goNext()})}_getGenderValue(){let e=this._parentElement.querySelector(".gender-checkboxes-container");e.addEventListener("change",()=>{setTimeout(()=>{let t=e.querySelector(".w--redirected-checked").closest(".w-radio");this._genderValue=t.querySelector("input").value,console.log(this._genderValue)},100)})}_getFieldValues(){let e=this._genderValue;return[e,this._ageField.value,this._weightField.value,this._weightUnitField.value]}_isValidFields(){let[e,t,n,i]=this._getFieldValues();""!=e&&""!=t&&t>=12&&""!=n&&""!=i?this.activateBtn(this._targetBtn):this.inActiveBtn(this._targetBtn)}}var _=new g,m=new class{_allCallArr;initFn(){let e=[...document.querySelectorAll("[data-phone]")],n=document.querySelector(".alert-info"),i=document.querySelector(".alert-error"),a=e.map(e=>{let a=window.intlTelInput(e,{initialCountry:"auto",geoIpLookup:function(e){t("https://extreme-ip-lookup.com/json/?key=2R3cffV00WVwfx3gbVPo").catch(()=>({countryCode:"us"})).then(t=>e(t.countryCode))},preferredCountries:["us","ca","ae","in"],utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"});return function(t){let r=a.getNumber();e.value=`${r}`,n.style.display="none",i.style.display="none";let l=new URLSearchParams;l.append("phone",r),fetch("https://intl-tel-input-5954.twil.io/lookup",{method:"POST",body:l}).then(e=>e.json()).then(e=>{if(e.success)n.style.display="",n.innerHTML=`Phone number in E.164 format: <strong>${r}</strong>`,console.log(e);else throw console.log(e),console.error(e.error),i.style.display="",i.innerHTML=e.error,Error(e.error)}).catch(e=>{throw i.style.display="",i.innerHTML=`Something went wrong: ${e}`,e})}});this._allCallArr=a}};class p extends c{_parentElement=document.querySelector("#phone-filed-slide");_phoneField=this._parentElement.querySelector("#phone");_targetBtn=this.findTargetBtn();_info=document.querySelector(".alert-info");_error=document.querySelector(".alert-error");phoneFieldClickHandler(e){m.initFn(),this._phoneField.addEventListener("input",this._isValidFields.bind(this)),this._targetBtn.addEventListener("click",()=>{m._allCallArr[0].call();let t=this._phoneField.value;setTimeout(()=>{this.goNext()},1e3),e(t)})}_isValidFields(){this._error.style.display="none";let e=this._phoneField.value;e.length>4&&/^[0-9]+$/.test(e)?this.activateBtn():this.inActiveBtn()}}var w=new p;let y=async function(e){await a()},f=async function(e){await r()};u.nameEmailClickHandler(function(e){s(e),l(e)}),_.ageGenderWeightClickHandler(function(e){o(e)}),w.phoneFieldClickHandler(function(e){d(e)}),y(),f()})();
//# sourceMappingURL=controller.js.map
